<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jungle Treasure Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('https://cdn.pixabay.com/photo/2016/10/23/01/12/jungle-1767236_1280.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }
    .container {
      text-align: center;
      padding: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      grid-gap: 10px;
      justify-content: center;
      margin: 20px auto;
    }
    .square {
      width: 60px;
      height: 60px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid #fff;
      border-radius: 8px;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .info, .controls {
      margin: 15px auto;
      max-width: 400px;
    }
    .leaderboard, .progress {
      background: rgba(0, 0, 0, 0.6);
      padding: 10px;
      margin-top: 15px;
      border-radius: 8px;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      .grid {
        grid-template-columns: repeat(4, 50px);
        grid-gap: 8px;
      }
      .square {
        width: 50px;
        height: 50px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üå¥ Jungle Treasure</h1>
    <div class="info">
      <p><strong>Balance:</strong> $<span id="balance">0.00</span></p>
      <p><strong>Tokens:</strong> <span id="tokens">0</span></p>
      <p><strong>Tries Left:</strong> <span id="tries">4</span></p>
    </div>
    <div class="controls">
      <button onclick="buyPackage(0.5, 2)">Silver ($0.50)</button>
      <button onclick="buyPackage(1.00, 3)">Gold ($1.00)</button>
      <button onclick="buyPackage(2.00, 4)">Platinum ($2.00)</button>
    </div>
    <div class="grid" id="grid"></div>
    <div class="progress">
      <p><strong>Level:</strong> <span id="level">1</span></p>
      <p><strong>Wins in a row:</strong> <span id="streak">0</span></p>
    </div>
    <div class="leaderboard">
      <h3>üèÜ Leaderboard</h3>
      <ul id="leaderboard"></ul>
    </div>
    <div class="controls">
      <button onclick="shareGame()">üì£ Share</button>
    </div>
  </div>

  <script>
    let balance = 0;
    let tokens = 0;
    let currentPackage = null;
    let streak = 0;
    let level = 1;
    let tries = 4;
    const leaderboard = [];

    function updateDisplay() {
      document.getElementById("balance").textContent = balance.toFixed(2);
      document.getElementById("tokens").textContent = tokens;
      document.getElementById("tries").textContent = tries;
      document.getElementById("streak").textContent = streak;
      document.getElementById("level").textContent = level;
      updateLeaderboard();
    }

    function buyPackage(cost, maxTokens) {
      if (tries < 4) return alert("Finish your current round first.");
      balance -= cost;
      currentPackage = { cost, maxTokens };
      tries = 4;
      tokens = 0;
      generateGrid();
      updateDisplay();
    }

    function generateGrid() {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      const cells = Array(20).fill("empty");
      const tokenCount = currentPackage.maxTokens;
      const bombIndex = Math.floor(Math.random() * 20);

      for (let i = 0; i < tokenCount; i++) {
        let idx;
        do {
          idx = Math.floor(Math.random() * 20);
        } while (cells[idx] !== "empty" || idx === bombIndex);
        cells[idx] = "token";
      }
      cells[bombIndex] = "bomb";

      cells.forEach((type, idx) => {
        const div = document.createElement("div");
        div.className = "square";
        div.addEventListener("click", () => handleClick(type, div));
        grid.appendChild(div);
      });
    }

    function handleClick(type, div) {
      if (div.textContent) return;
      if (type === "bomb") {
        div.textContent = "üí£";
        streak = 0;
        tries = 0;
        tokens = 0;
        alert("üí• Boom! You hit a bomb. Balance reset.");
        updateDisplay();
      } else if (type === "token") {
        div.textContent = "üí∞";
        tokens++;
        tries--;
        if (tokens >= 2) {
          const reward = currentPackage.cost * 2;
          balance += reward;
          streak++;
          if (streak % 3 === 0) level++;
          leaderboard.push({ name: "Player", reward });
          alert("üéâ You doubled your money!");
          tries = 0;
        }
        updateDisplay();
      } else {
        div.textContent = "‚ò†Ô∏è";
        tries--;
        updateDisplay();
      }
      if (tries <= 0 && tokens < 2) {
        alert("Out of tries! Try another package.");
      }
    }

    function updateLeaderboard() {
      const list = document.getElementById("leaderboard");
      list.innerHTML = leaderboard.slice(-5).reverse().map(p => `<li>${p.name} - $${p.reward.toFixed(2)}</li>`).join('');
    }

    function shareGame() {
      alert("Share this game with your friends!");
    }

    updateDisplay();
  </script>
</body>
</html>
