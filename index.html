<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tens Mine - Token Mining Game</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1400&q=80') no-repeat center center fixed;
    background-size: cover;
    color: #fff;
    text-align: center;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }
  header {
    background: rgba(0,0,0,0.6);
    padding: 1rem;
  }
  h1 {
    margin: 0;
    font-size: 2rem;
  }
  #game-container {
    margin: 20px auto;
    display: grid;
    grid-template-columns: repeat(5, 80px);
    grid-gap: 10px;
    justify-content: center;
  }
  .square {
    width: 80px;
    height: 80px;
    background-color: rgba(0,0,0,0.5);
    border-radius: 10px;
    cursor: pointer;
    font-size: 40px;
    line-height: 80px;
    user-select: none;
    transition: background-color 0.3s;
  }
  .square:hover {
    background-color: rgba(255,255,255,0.2);
  }
  .disabled {
    pointer-events: none;
    opacity: 0.6;
  }
  #packages {
    margin: 20px auto;
  }
  button.package {
    margin: 0 10px;
    padding: 10px 20px;
    font-size: 1.1rem;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    color: #333;
  }
  button.package:hover {
    background-color: #ddd;
  }
  #balance {
    margin: 20px;
    font-size: 1.3rem;
  }
  #message {
    margin: 10px;
    font-size: 1.2rem;
    min-height: 24px;
  }
  /* Modal Styles */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right:0;
    bottom:0;
    background: rgba(0,0,0,0.75);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  .modal {
    background: #222;
    border-radius: 8px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    padding: 20px 30px;
    color: #eee;
    text-align: left;
    position: relative;
  }
  .modal h2 {
    margin-top: 0;
    font-size: 1.8rem;
    border-bottom: 1px solid #555;
    padding-bottom: 8px;
  }
  .modal p {
    line-height: 1.5;
    margin-bottom: 1rem;
  }
  .modal button.close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    color: #eee;
    font-size: 1.5rem;
    cursor: pointer;
  }
  footer {
    background: rgba(0,0,0,0.6);
    padding: 10px 0;
    margin-top: auto;
    font-size: 0.9rem;
  }
  footer a {
    color: #aaddff;
    margin: 0 10px;
    cursor: pointer;
    text-decoration: underline;
  }
</style>
</head>
<body>
<header>
  <h1>Tens Mine - Token Mining Game</h1>
</header>

<div id="packages">
  <button class="package" data-package="silver">Silver Package - 50¢</button>
  <button class="package" data-package="gold">Gold Package - $1.00</button>
  <button class="package" data-package="platinum">Platinum Package - $2.00</button>
</div>

<div id="balance">Tokens: 0 | Cash Balance: $0.00</div>

<div id="game-container"></div>

<div id="message"></div>

<footer>
  <a href="#" id="tos-link">Terms of Service</a> |
  <a href="#" id="privacy-link">Privacy Policy</a> |
  <a href="#" id="cashout-link">Cashout Policy</a>
</footer>

<!-- Terms of Service Modal -->
<div class="modal-overlay" id="tos-modal">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="tos-title">
    <button class="close-btn" aria-label="Close">&times;</button>
    <h2 id="tos-title">Terms of Service</h2>
    <p>Welcome to Tens Mine. By playing, you agree to our rules and policies. This game is intended for entertainment purposes. You must be at least 18 years old to play. Tokens earned can be cashed out according to our Cashout Policy. Use responsibly.</p>
    <p>All purchases are final. We reserve the right to modify or terminate the game at any time.</p>
  </div>
</div>

<!-- Privacy Policy Modal -->
<div class="modal-overlay" id="privacy-modal">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="privacy-title">
    <button class="close-btn" aria-label="Close">&times;</button>
    <h2 id="privacy-title">Privacy Policy</h2>
    <p>We respect your privacy. Any data collected is used solely to improve game experience and for legal compliance. We do not sell your information. No personal data is shared with third parties beyond what is necessary for processing transactions.</p>
  </div>
</div>

<!-- Cashout Policy Modal -->
<div class="modal-overlay" id="cashout-modal">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="cashout-title">
    <button class="close-btn" aria-label="Close">&times;</button>
    <h2 id="cashout-title">Cashout Policy</h2>
    <p>Players may cash out once they have doubled their purchased package value by finding tokens. For example, if you buy the Silver Package for 50¢, finding 2 tokens doubles it to $1.00 available for cashout.</p>
    <p>Cashouts are processed manually or automatically depending on payment method. Processing times may vary. Players are responsible for providing accurate payment information.</p>
  </div>
</div>

<script>
  // Modal functionality
  function setupModal(triggerId, modalId) {
    const trigger = document.getElementById(triggerId);
    const modal = document.getElementById(modalId);
    const closeBtn = modal.querySelector('.close-btn');
    trigger.addEventListener('click', e => {
      e.preventDefault();
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden'; // Prevent background scroll
    });
    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
    });
    // Close on outside click
    modal.addEventListener('click', e => {
      if (e.target === modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    });
  }
  setupModal('tos-link', 'tos-modal');
  setupModal('privacy-link', 'privacy-modal');
  setupModal('cashout-link', 'cashout-modal');

  // Game variables
  const gridSize = 20;
  const tokensNeededToWin = 2;
  const packages = {
    silver: { cost: 0.5, maxTokens: 3, winningTokens: 2 },
    gold: { cost: 1.0, maxTokens: 5, winningTokens: 2 },
    platinum: { cost: 2.0, maxTokens: 8, winningTokens: 2 },
  };

  let currentPackage = null;
  let tokensFound = 0;
  let tokensLeftToFind = 0;
  let bombs = [];
  let tokensPositions = [];
  let gameActive = false;

  const balanceDisplay = document.getElementById('balance');
  const messageDisplay = document.getElementById('message');
  const gameContainer = document.getElementById('game-container');

  function startGame(pkg) {
    currentPackage = packages[pkg];
    tokensFound = 0;
    tokensLeftToFind = currentPackage.winningTokens;
    gameActive = true;
    messageDisplay.textContent = `Game started! Find ${tokensLeftToFind} tokens to double your $${currentPackage.cost.toFixed(2)}!`;
    balanceDisplay.textContent = `Tokens: 0 | Cash Balance: $0.00`;
    generateGrid();
  }

  function generateGrid() {
    gameContainer.innerHTML = '';
    bombs = [];
    tokensPositions = [];
    let positions = [...Array(gridSize).keys()];

    // Place tokens (winning tokens + a few more random tokens up to maxTokens)
    const totalTokens = currentPackage.maxTokens;
    while (tokensPositions.length < totalTokens) {
      let idx = positions.splice(Math.floor(Math.random() * positions.length), 1)[0];
      tokensPositions.push(idx);
    }

    // Remaining squares are bombs
    bombs = [...Array(gridSize).keys()].filter(i => !tokensPositions.includes(i));

    for (let i = 0; i < gridSize; i++) {
      const sq = document.createElement('div');
      sq.classList.add('square');
      sq.dataset.index = i;
      sq.textContent = '☠️'; // default skull for bomb
      sq.addEventListener('click', onSquareClick);
      gameContainer.appendChild(sq);
    }
  }

  function onSquareClick(e) {
    if (!gameActive) return;
    const sq = e.currentTarget;
    const idx = parseInt(sq.dataset.index);

    if (tokensPositions.includes(idx)) {
      tokensFound++;
      sq.textContent = '💰';
      sq.classList.add('disabled');
      tokensLeftToFind--;
      messageDisplay.textContent = `Good! ${tokensLeftToFind} token${tokensLeftToFind !== 1 ? 's' : ''} left to find.`;
      updateBalance();
      if (tokensFound >= currentPackage.winningTokens) {
        messageDisplay.textContent = `Congrats! You doubled your $${currentPackage.cost.toFixed(2)}! You can cash out now.`;
        gameActive = false;
        disableAllSquares();
      }
    } else if (bombs.includes(idx)) {
      // Bomb hit: game over
      showGameOver();
      resetGame();
    }
  }

  function updateBalance() {
    const cash = currentPackage.cost * 2; // double package cost on win
    balanceDisplay.textContent = `Tokens: ${tokensFound} | Cash Balance: $${tokensFound >= currentPackage.winningTokens ? cash.toFixed(2) : '0.00'}`;
  }

  function disableAllSquares() {
    document.querySelectorAll('.square').forEach(sq => {
      sq.classList.add('disabled');
    });
  }

  function showGameOver() {
    messageDisplay.textContent = '💥 Boom! You hit a bomb. Your balance resets to $0.00.';
    gameActive = false;
    disableAllSquares();
  }

  function resetGame() {
    tokensFound = 0;
    tokensLeftToFind = 0;
    currentPackage = null;
  }

  // Package buttons
  document.querySelectorAll('.package').forEach(button => {
    button.addEventListener('click', () => {
      startGame(button.dataset.package);
    });
  });
</script>
</body>
</html>
