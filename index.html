<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tens Mine</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #222;
      color: #fff;
    }
    #game-container {
      margin-top: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 80px);
      grid-gap: 10px;
      justify-content: center;
      margin: 20px auto;
    }
    .cell {
      width: 80px;
      height: 80px;
      background-color: #444;
      border: 2px solid #999;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 20px;
    }
    .cell.revealed {
      background-color: #222;
      cursor: default;
    }
  </style>
</head>
<body>
  <h1>Tens Mine</h1>
  <div>
    <button onclick="buyPackage('silver')">Silver - $0.50</button>
    <button onclick="buyPackage('gold')">Gold - $1.00</button>
    <button onclick="buyPackage('platinum')">Platinum - $2.00</button>
  </div>
  <div id="status"></div>
  <div id="game-container">
    <div class="grid" id="grid"></div>
  </div>

  <script>
    const packages = {
      silver: { price: 0.5, gridSize: 6 },
      gold: { price: 1.0, gridSize: 12 },
      platinum: { price: 2.0, gridSize: 20 }
    };

    let gameState = {
      balance: 0,
      tokensFound: 0,
      board: [],
      active: false,
      targetTokens: 3,
      payout: 0,
    };

    function buyPackage(type) {
      const pkg = packages[type];
      resetGame();
      generateBoard(pkg.gridSize);
      gameState.active = true;
      gameState.tokensFound = 0;
      gameState.payout = pkg.price + 0.1; // 10 cents more
      document.getElementById("status").innerText = `You bought the ${type} package. Find 3 tokens to win $${gameState.payout.toFixed(2)}!`;
    }

    function generateBoard(size) {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      gameState.board = new Array(size).fill("skull");

      // Place 3 tokens
      let placed = 0;
      while (placed < 3) {
        const idx = Math.floor(Math.random() * size);
        if (gameState.board[idx] === "skull") {
          gameState.board[idx] = "token";
          placed++;
        }
      }

      // Place 2 bombs max (for fairness)
      let bombs = 0;
      while (bombs < 2) {
        const idx = Math.floor(Math.random() * size);
        if (gameState.board[idx] === "skull") {
          gameState.board[idx] = "bomb";
          bombs++;
        }
      }

      for (let i = 0; i < size; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.dataset.index = i;
        cell.onclick = revealCell;
        grid.appendChild(cell);
      }
    }

    function revealCell(e) {
      if (!gameState.active) return;
      const idx = e.target.dataset.index;
      const cellValue = gameState.board[idx];

      e.target.classList.add("revealed");
      e.target.onclick = null;

      if (cellValue === "token") {
        e.target.innerHTML = "💰";
        gameState.tokensFound++;
        if (gameState.tokensFound === gameState.targetTokens) {
          gameState.balance += gameState.payout;
          document.getElementById("status").innerText = `🎉 You won $${gameState.payout.toFixed(2)}! Total balance: $${gameState.balance.toFixed(2)}`;
          gameState.active = false;
        }
      } else if (cellValue === "bomb") {
        e.target.innerHTML = "💣";
        document.getElementById("status").innerText = `💥 You hit a bomb! Balance reset to $0.`;
        gameState.balance = 0;
        gameState.active = false;
      } else {
        e.target.innerHTML = "☠️";
      }
    }

    function resetGame() {
      document.getElementById("grid").innerHTML = "";
    }
  </script>
</body>
</html>
