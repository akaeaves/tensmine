<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tens Mine</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-image: url('https://images.unsplash.com/photo-1549887534-4ba402d6ec0c');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      color: #fff;
      text-align: center;
    }
    .container {
      padding: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
    }
    .square {
      width: 60px;
      height: 60px;
      background-color: rgba(255, 255, 255, 0.8);
      color: black;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 8px;
    }
    .info {
      margin-top: 15px;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.9);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      color: black;
    }
    .modal-close {
      float: right;
      cursor: pointer;
      font-size: 20px;
    }
    .footer {
      margin-top: 40px;
      font-size: 14px;
    }
    .footer a {
      color: #fff;
      margin: 0 10px;
      text-decoration: underline;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Tens Mine</h1>
    <div>
      <label>Choose Package:
        <select id="package">
          <option value="0.5">Silver ($0.50)</option>
          <option value="1.0">Gold ($1.00)</option>
          <option value="2.0">Platinum ($2.00)</option>
        </select>
      </label>
      <button onclick="startGame()">Start Game</button>
    </div>

    <div class="info">
      <p>Balance: $<span id="balance">0.00</span></p>
      <p>Tries Left: <span id="tries">4</span></p>
    </div>

    <div class="grid" id="gameGrid"></div>
  </div>

  <div class="footer">
    <a onclick="openModal('tosModal')">Terms of Service</a>
    <a onclick="openModal('privacyModal')">Privacy Policy</a>
    <a onclick="openModal('cashoutModal')">Cashout Policy</a>
  </div>

  <!-- Modals -->
  <div id="tosModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('tosModal')">&times;</span>
      <h2>Terms of Service</h2>
      <p>You must be 18 or older to play. No guarantees of earning money. Abuse will result in ban.</p>
    </div>
  </div>

  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('privacyModal')">&times;</span>
      <h2>Privacy Policy</h2>
      <p>We do not share your data. We track gameplay anonymously for analytics.</p>
    </div>
  </div>

  <div id="cashoutModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal('cashoutModal')">&times;</span>
      <h2>Cashout Policy</h2>
      <p>If you earn double your package cost, you qualify for cashout. Contact support for redemption.</p>
    </div>
  </div>

  <script>
    let balance = 0;
    let triesLeft = 4;
    let tokensFound = 0;
    let gameActive = false;
    let packageValue = 0;

    function startGame() {
      const selected = parseFloat(document.getElementById("package").value);
      packageValue = selected;
      balance = 0;
      tokensFound = 0;
      triesLeft = 4;
      gameActive = true;
      document.getElementById("balance").innerText = balance.toFixed(2);
      document.getElementById("tries").innerText = triesLeft;
      generateGrid();
    }

    function generateGrid() {
      const grid = document.getElementById("gameGrid");
      grid.innerHTML = "";
      const bombIndex = Math.floor(Math.random() * 20);
      const tokenIndexes = new Set();
      while (tokenIndexes.size < 2) {
        const idx = Math.floor(Math.random() * 20);
        if (idx !== bombIndex) tokenIndexes.add(idx);
      }
      for (let i = 0; i < 20; i++) {
        const square = document.createElement("div");
        square.classList.add("square");
        square.dataset.index = i;
        square.onclick = () => handleClick(i, bombIndex, tokenIndexes);
        square.innerText = "‚ùì";
        grid.appendChild(square);
      }
    }

    function handleClick(index, bombIndex, tokenIndexes) {
      if (!gameActive || triesLeft <= 0) return;
      const square = document.querySelector(`.square[data-index='${index}']`);
      if (!square || square.innerText !== "‚ùì") return;

      if (index === bombIndex) {
        square.innerText = "üí£";
        alert("Boom! You hit a bomb. Balance reset to $0.00.");
        balance = 0;
        gameActive = false;
        updateDisplay();
        return;
      }

      if (tokenIndexes.has(index)) {
        square.innerText = "üí∞";
        tokensFound++;
      } else {
        square.innerText = "‚ò†Ô∏è";
      }

      triesLeft--;
      if (triesLeft <= 0) {
        if (tokensFound >= 2) {
          balance = packageValue * 2;
          alert("Congrats! You doubled your money.");
        } else {
          alert("Round over. Not enough tokens.");
        }
        gameActive = false;
      }
      updateDisplay();
    }

    function updateDisplay() {
      document.getElementById("balance").innerText = balance.toFixed(2);
      document.getElementById("tries").innerText = triesLeft;
    }

    function openModal(id) {
      document.getElementById(id).style.display = "block";
    }
    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }
  </script>
</body>
</html>
